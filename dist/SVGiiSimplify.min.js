!function(e){"use strict";function l(e,t=!0){t="log";const l={77:2,109:2,65:7,97:7,67:6,99:6,72:1,104:1,76:2,108:2,81:4,113:4,83:4,115:4,84:2,116:2,86:1,118:1,90:0,122:0},a=new Set([77,109,65,97,67,99,72,104,76,108,81,113,83,115,84,116,86,118,90,122]),n=new Set([5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279]);let s,h=0,y=e.length,u="",r=[],i=-1,x="",o=!1,c=!1,p=0,f=0,g=0,v=!1,M=!1,m=!1,d=!1,b=!1,C=new Set(["m","c","q","l","a","t","s","v","h"]),A=new Set(["t","s","v","h","T","S","V","H"]),w=new Set(["t","q","T","Q"]),P=[];function S(){v&&("M"===u?u="L":"m"===u&&(u="l"),r.push({type:u,values:[]}),i++,f=0,v=!1)}function L(e=!1){(e?p>0:""!==x)&&(t&&-1===i&&(s="Pathdata must start with M command",P.push(s),u="M",r.push({type:u,values:[]}),g=2,f=0,i++),"A"===u||"a"===u?(x=function(){let e=x.length,t=!1;3===f&&2===e||4===f&&e>1?(x=[+x[0],+x[1]],t=!0,f++):3===f&&e>=3&&(x=[+x[0],+x[1],+x.substring(2)],t=!0,f+=2);return t?x:[+x]}(),r[i].values.push(...x)):(t&&x[1]&&"."!==x[1]&&"0"===x[0]&&(s="Leading zeros not valid: "+x,P.push(s)),r[i].values.push(+x)),f++,x="",p=0,v=f>=g)}function I(){if(t){let e=i>0?r[i]:0,t=e?e.values.length:0;if(t&&t<g||t&&t>g||("z"===u||"Z"===u)&&t>0){s=`Pathdata commands in "${u}" (segment index: ${i}) don't match allowed number of values: ${g-t}/${g}`,P.push(s)}}}for(;h<y;){let t=e[h],s=e.charCodeAt(h);if(D=s,a.has(D)){""!==x&&(r[i].values.push(+x),f++,x=""),I(),u=t,g=l[s];let e="M"===u||"m"===u;i>0&&("z"===r[i].type||"Z"===r[i].type)&&!e&&(r.push({type:"m",values:[0,0]}),i++),r.push({type:u,values:[]}),i++,M||(M=C.has(u)),d||(d=A.has(u)),b||(b=w.has(u)),m||(m="a"===u||"A"===u),c=!1,p=0,f=0,v=!1,h++}else if(10===(k=s)||13===k||8232===k||8233===k||44===k||32===k||9===k||11===k||12===k||160===k||k>=5760&&n.has(k)>=0)L(),c=!0,o=!1,h++;else{if(h===y-1){x+=t,L(),c=!1,o=!1,I();break}if(!o&&!c&&45===s||!o&&46===s){let e=46===s;L(e),S(),e&&p++}else S();x+=t,o=69===s||101===s,c=!1,h++}}var k,D;return I(),t&&P.length&&(s="Invalid path data:\n"+P.join("\n"),console.log(s)),r[0].type="M",{pathData:r,hasRelatives:M,hasShorthands:d,hasQuadratics:b,hasArcs:m}}function a(e,t=-1){let l=!("auto"!=t||!e[0].hasOwnProperty("decimals"));for(let a=0,n=e.length;a<n;a++){let n=e[a];(t>-1||l)&&(t=l?n.decimals:t,e[a].values=n.values.map((e=>e?+e.toFixed(t):e)))}return e}const{abs:n,acos:s,asin:h,atan:y,atan2:u,ceil:r,cos:i,exp:o,floor:c,log:p,max:f,min:g,pow:v,random:M,round:d,sin:C,sqrt:A,tan:w,PI:S}=Math;function L(e,t,l=!1){let a=u(t.y-e.y,t.x-e.x);return l&&a<0&&(a+=2*Math.PI),a}function I(e,t,l,a,n=!0){let s,h,y,u,r,i={};try{if(s=(a.y-l.y)*(t.x-e.x)-(a.x-l.x)*(t.y-e.y),0==s)return!1}catch{console.log("!catch",e,t,"p3:",l,a)}h=e.y-l.y,y=e.x-l.x,u=(a.x-l.x)*h-(a.y-l.y)*y,r=(t.x-e.x)*h-(t.y-e.y)*y,h=u/s,y=r/s,i={x:e.x+h*(t.x-e.x),y:e.y+h*(t.y-e.y)};let x=!1;return h>0&&h<1&&y>0&&y<1&&(x=!0),!(n&&!x)&&i}function k(e,t){return A((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))}function D(e,t){return(t.x-e.x)**2+(t.y-e.y)**2}function Q(e,t,l,a=!1){let n={x:(t.x-e.x)*l+e.x,y:(t.y-e.y)*l+e.y};return a&&(n.angle=L(e,t),n.angle<0&&(n.angle+=2*S)),n}function $(e,t=.5,l=!1,a=!1){let n;return n=e.length>2?((e,t,l=!1)=>{let n=4===e.length,s=e[0],h=e[1],y=n?e[2]:e[1],u=e[e.length-1],r={x:0,y:0};if(l||a){let e,l,i,x,o,c=s.x===h.x&&s.y===h.y,p=u.x===y.x&&u.y===y.y;0!==t||c?1!==t||p?(c&&(t+=1e-7),p&&(t-=1e-7),e=Q(s,h,t),n?(l=Q(h,y,t),i=Q(y,u,t),x=Q(e,l,t),o=Q(l,i,t),r=Q(x,o,t),r.angle=L(x,o),a&&(r.cpts=[l,i,x,o])):(l=Q(s,h,t),i=Q(h,u,t),r=Q(l,i,t),r.angle=L(l,i),a&&(r.cpts=[l,i]))):(r.x=u.x,r.y=u.y,r.angle=L(y,u)):(r.x=s.x,r.y=s.y,r.angle=L(s,h))}else{let e=1-t;r=n?{x:e**3*s.x+3*e**2*t*h.x+3*e*t**2*y.x+t**3*u.x,y:e**3*s.y+3*e**2*t*h.y+3*e*t**2*y.y+t**3*u.y}:{x:e*e*s.x+2*e*t*h.x+t**2*u.x,y:e*e*s.y+2*e*t*h.y+t**2*u.y}}return r})(e,t,l):Q(e[0],e[1],t,l),l&&n.angle<0&&(n.angle+=2*S),n}function z(e){let t=[],l={x:e[0].values[0],y:e[0].values[1]};return e.forEach((e=>{let{type:a,values:n}=e;if(n.length){let e=n.length>1?{x:n[n.length-2],y:n[n.length-1]}:"V"===a?{x:l.x,y:n[0]}:{x:n[0],y:l.y};t.push(e),l=e}})),t}function T(e,t,l,a,s,h,y,r,x){const o=(e,t,l,a)=>u(a-t,l-e);let c={cx:0,cy:0,rx:l=n(l),ry:a=n(a),startAngle:0,endAngle:0,deltaAngle:0,clockwise:y,xAxisRotation:s,largeArc:h,sweep:y};if(0==l||0==a)throw Error("rx and ry can not be 0");if(l===a){let l=Math.abs(r-e),a=Math.abs(x-t),n=l,s=Math.min(e,r),h=Math.min(t,x),u=.5*Math.PI;if(0===l&&a||0===a&&l)return n=0===l&&a?a/2:l/2,c.rx=n,c.ry=n,0===l&&a?(c.cx=e,c.cy=h+a/2,c.startAngle=t>x?u:-u,c.endAngle=t>x?-u:u,c.deltaAngle=y?Math.PI:-Math.PI):0===a&&l&&(c.cx=s+l/2,c.cy=t,c.startAngle=e>r?Math.PI:0,c.endAngle=e>r?-Math.PI:Math.PI,c.deltaAngle=y?Math.PI:-Math.PI),c}let p,f,g=l===a?0:s*S/180,v=g?C(g):0,M=g?i(g):1,m=(e-r)/2,d=(t-x)/2,b=(e+r)/2,w=(t+x)/2,P=g?M*m+v*d:m,L=g?M*d-v*m:d,I=P*P/(l*l)+L*L/(a*a);I>1&&(l*=A(I),a*=A(I),c.rx=l,c.ry=a);let k=l*a,D=l*L,Q=a*P,$=D**2+Q**2;if(!$)throw Error("start point can not be same as end point");let z=A(n((k*k-$)/$));h==y&&(z=-z);let T=z*D/a,E=-z*Q/l;p=g?M*T-v*E+b:b+T,f=g?v*T+M*E+w:w+E,c.cy=f,c.cx=p;let F=o(p,f,e,t),V=o(p,f,r,x);!y&&V>F&&(V-=2*Math.PI),y&&F>V&&(V=V<=0?V+2*Math.PI:V);let q=V-F;return c.startAngle=F,c.endAngle=V,c.deltaAngle=q,c}function E(e,t,l,a,n,s=0,h=!0,u=!1){if(n=u?n*S/180:n,s=u?s*S/180:s,s=l!==a&&s!==2*S?s:0,h&&l!==a){let e=y(w(n=s?n-s:n)*(l/a));n=i(n)<0?e+S:e}let r=e+l*i(n),x=t+a*C(n),o={x:r,y:x};return s&&(o.x=e+(r-e)*i(s)-(x-t)*C(s),o.y=t+(r-e)*C(s)+(x-t)*i(s)),o}function F(e,t=[],l=.05){let a=3===t.length,n=t[0],s=a?t[1]:null,h=a?t[2]:t[1],y=.5*Math.PI,u=!1,r=!1,i=L(h,n,!0);if(u=Math.abs(i%y)<l||Math.abs(i%y-y)<l,a){let e=s?L(s,h,!0):0;r=Math.abs(e%y)<=l||Math.abs(e%y-y)<=l}return u||r}function V(e){return 4===e.length?function(e,t,l,a){let[n,s,h,y,u,r,i,x]=[e.x,e.y,t.x,t.y,l.x,l.y,a.x,a.y],o=Math.min(e.y,a.y),c=Math.min(e.x,a.x),p=Math.max(e.x,a.x),f=Math.max(e.y,a.y);if(t.y>=o&&t.y<=f&&l.y>=o&&l.y<=f&&t.x>=c&&t.x<=p&&l.x>=c&&l.x<=p)return[];for(var g,v,M,m,d,b,C,A,w=[],P=0;P<2;++P)if(0==P?(v=6*n-12*h+6*u,g=-3*n+9*h-9*u+3*i,M=3*h-3*n):(v=6*s-12*y+6*r,g=-3*s+9*y-9*r+3*x,M=3*y-3*s),Math.abs(g)<1e-12){if(Math.abs(v)<1e-12)continue;0<(m=-M/v)&&m<1&&w.push(m)}else(C=v*v-4*M*g)<0?Math.abs(C)<1e-12&&0<(m=-v/(2*g))&&m<1&&w.push(m):(0<(d=(-v+(A=Math.sqrt(C)))/(2*g))&&d<1&&w.push(d),0<(b=(-v-A)/(2*g))&&b<1&&w.push(b));var S=w.length;for(;S--;)m=w[S];return w}(e[0],e[1],e[2],e[3]):function(e,t,l){let a,n,s,h=Math.min(e.y,l.y),y=Math.min(e.x,l.x),u=Math.max(e.x,l.x),r=Math.max(e.y,l.y);if(t.y>=h&&t.y<=r&&t.x>=y&&t.x<=u)return[];let[i,x,o,c,p,f]=[e.x,e.y,t.x,t.y,l.x,l.y],g=[];for(var v=0;v<2;++v)a=0==v?i-2*o+p:x-2*c+f,n=0==v?-2*i+2*o:-2*x+2*c,Math.abs(a)>1e-12&&(s=-n/(2*a),s>0&&s<1&&g.push(s));return g}(e[0],e[1],e[2])}function q(e,t){const l=(e,t,l,a,n,s)=>{var h=Math.cos(s),y=Math.sin(s),u=a*Math.cos(e),r=n*Math.sin(e);return{x:t+h*u-y*r,y:l+y*u+h*r}};let a,n,s,h,y,u=T(e.x,e.y,t[0],t[1],t[2],t[3],t[4],t[5],t[6]),{rx:r,ry:i,cx:x,cy:o,endAngle:c,deltaAngle:p}=u,f=t[2],g={x:t[5],y:t[6]},v=[g],M=f*Math.PI/180,m=Math.tan(M);y=Math.atan2(-i*m,r);let d=y,b=y+Math.PI,C=Math.atan2(i,r*m),A=C+Math.PI,w=[e.x,g.x],P=[e.y,g.y],S=Math.min(...w),L=Math.max(...w),I=Math.min(...P),k=Math.max(...P),D=l(c-.001*p,x,o,r,i,M),Q=l(c-.999*p,x,o,r,i,M);return(D.x>L||Q.x>L)&&(a=l(d,x,o,r,i,M),v.push(a)),(D.x<S||Q.x<S)&&(n=l(b,x,o,r,i,M),v.push(n)),(D.y<I||Q.y<I)&&(h=l(A,x,o,r,i,M),v.push(h)),(D.y>k||Q.y>k)&&(s=l(C,x,o,r,i,M),v.push(s)),v}function O(e,t=.025){let l=e[0],a=e[e.length-1],n=e.map((e=>e.x)),s=e.map((e=>e.y)),h=Math.min(...n),y=Math.max(...n),u=Math.min(...s),r=y-h,i=Math.max(...s)-u;if(e.length<3||0===r||0===i)return{area:0,flat:!0,thresh:1e-4,ratio:0};let x=D(l,a),o=D(l,e[0]),c=(o+(e.length>3?D(a,e[1]):o))/2;let p=.5*(r+i)*.5,f=0;for(let t=0,l=e.length;t<l;t++){f+=e[t].x*e[t===e.length-1?0:t+1].y*.5-e[t===e.length-1?0:t+1].x*e[t].y*.5}f=+Math.abs(f).toFixed(9);return{area:f,flat:0===f||f<c/1e3,thresh:p,ratio:f/c,squareDist:x,areaThresh:x/1e3}}function j(e,t="",l="green",a="1%",n=!0){let s=`<path d="${t}" fill="none" stroke="${l}"  stroke-width="${a}" /> `;if(!n)return s;e.insertAdjacentHTML("beforeend",s)}function Z(e){let t=[];try{e.map(((e,t)=>"m"===e.type.toLowerCase()?t:-1)).filter((e=>-1!==e))}catch{console.log("catch",e)}let l=e.map(((e,t)=>"m"===e.type.toLowerCase()?t:-1)).filter((e=>-1!==e));return 1===l.length?[e]:(l.forEach(((a,n)=>{t.push(e.slice(a,l[n+1]))})),t)}function N(e,t){let l,a,n,s,h,y,u=[],r=[],i=e[0],x=e[1],o=e[e.length-2],c=e[e.length-1];return 4===e.length?(l=$([i,x],t),a=$([x,o],t),n=$([o,c],t),s=$([l,a],t),h=$([a,n],t),y=$([s,h],t),u.push({x:i.x,y:i.y},{x:l.x,y:l.y},{x:s.x,y:s.y},{x:y.x,y:y.y}),r.push({x:y.x,y:y.y},{x:h.x,y:h.y},{x:n.x,y:n.y},{x:c.x,y:c.y})):3===e.length?(a=$([i,x],t),n=$([x,c],t),y=$([a,n],t),u.push({x:i.x,y:i.y},{x:a.x,y:a.y},{x:y.x,y:y.y}),r.push({x:y.x,y:y.y},{x:n.x,y:n.y},{x:c.x,y:c.y})):2===e.length&&(a=$([i,c],t),u.push({x:i.x,y:i.y},{x:a.x,y:a.y}),r.push({x:a.x,y:a.y},{x:c.x,y:c.y})),[u,r]}function J(e,t){let l=[],a=6===t.length?"C":"Q",n={x:t[0],y:t[1]},s="C"===a?{x:t[2],y:t[3]}:n,h={x:t[4],y:t[5]},y=Math.max(h.x,e.x),u=Math.min(h.x,e.x),r=Math.max(h.y,e.y),i=Math.min(h.y,e.y),x=0;if(n.x<u||n.x>y||n.y<i||n.y>r||s.x<u||s.x>y||s.y<i||s.y>r){let y=V("C"===a?[e,n,s,h]:[e,n,h]).sort();if(y.length){let a=function(e,t,l,a=!0){let n=[];if(!l.length)return!1;let s,h,y,u=t.length,r={x:t[u-2],y:t[u-1]};2===t.length?y=[e,r]:4===t.length?(s={x:t[0],y:t[1]},y=[e,s,r]):6===t.length&&(s={x:t[0],y:t[1]},h={x:t[2],y:t[3]},y=[e,s,h,r]);if(l.length)if(1===l.length){let e=N(y,l[0]),t=e[0],a=e[1];n.push(t,a)}else{let e=l[0],t=N(y,e),a=t[0];n.push(a),y=t[1];for(let t=1;t<l.length;t++){e=l[t-1];let a=N(y,(l[t]-e)/(1-e));n.push(a[0]),t===l.length-1&&n.push(a[a.length-1]),y=a[1]}}if(a){let e,t,l=[];return n.forEach((a=>{e={type:"",values:[]},a.shift(),t=a.map((e=>Object.values(e))).flat(),e.values=t,3===a.length?e.type="C":2===a.length?e.type="Q":1===a.length&&(e.type="L"),l.push(e)})),l}return n}(e,t,y);l.push(...a),x+=a.length}else console.log("no extreme: ",y),l.push({type:a,values:t})}else l.push({type:a,values:t});return{pathData:l,count:x}}function G(e,t=-1){let l=e.map((e=>e.x)),a=e.map((e=>e.y)),n=Math.min(...l),s=Math.max(...l),h=Math.min(...a),y=Math.max(...a),u={x:n,left:n,right:s,y:h,top:h,bottom:y,width:s-n,height:y-h};if(t>-1)for(let e in u)u[e]=+u[e].toFixed(t);return u}function H(e){let t=[];return e.forEach((e=>{let l=function(e){let t=function(e){let t=[];for(let l=0;l<e.length;l++){let a=e[l],n=l>0?e[l-1]:e[l],{type:s,values:h}=a,y={x:n.values[n.values.length-2],y:n.values[n.values.length-1]},u=h.length?{x:h[h.length-2],y:h[h.length-1]}:"",r=h.length?{x:h[0],y:h[1]}:"";switch(s){case"A":if("function"!=typeof arcToBezier){let e=k(y,u)/2,l=Q(y,u,.5),a=E(l.x,l.y,e,e,0),n=E(l.x,l.y,e,e,Math.PI);t.push(a,n,u);break}arcToBezier(y,h).forEach((e=>{let l=e.values,a={x:l[0],y:l[1]},n={x:l[2],y:l[3]},s={x:l[4],y:l[5]};t.push(a,n,s)}));break;case"C":let e={x:h[2],y:h[3]};t.push(r,e);break;case"Q":t.push(r)}"z"!==s.toLowerCase()&&t.push(u)}return t}(e),l=G(t);return l}(e);t.push(l)})),t}function R(e,t){let[l,a,n,s,h,y]=[e.x,e.y,e.width,e.height,e.x+e.width,e.y+e.height],[u,r,i,x,o,c]=[t.x,t.y,t.width,t.height,t.x+t.width,t.y+t.height],p=!1;return n*s!=i*x&&n*s>i*x&&l<u&&h>o&&a<r&&y>c&&(p=!0),p}function B(e,t){let l=0,a="z"===e[e.length-1].type.toLowerCase();if(!a||t<1||e.length<3)return e;let n=a?1:0;!function(e){let t=e.length,l="Z"==e[t-1].type,a=e[0],[n,s]=[a.values[0],a.values[1]].map((e=>+e.toFixed(8))),h=l?e[t-2]:e[t-1],y=h.values.length,[u,r]=[h.values[y-2],h.values[y-1]].map((e=>+e.toFixed(8)));!l||n==u&&s==r||(e.pop(),e.push({type:"L",values:[n,s]},{type:"Z",values:[]}))}(e),l=t+1<e.length-1?t+1:e.length-1-n;let s,h,y=e.slice(l),u=e.slice(0,l);return u.shift(),s=u[u.length-1].values||[],h=[s[s.length-2],s[s.length-1]],n&&(y.pop(),u.push({type:"Z",values:[]})),e=[{type:"M",values:h},...y,...u]}function U(e,t=!1,l=!0,a=!0,n=!1){let s=[],h=[(e=JSON.parse(JSON.stringify(e)))[0]],y=G(z(e)),{width:u,height:r}=y,i=(u+r)/2*.001,x={x:e[0].values[0],y:e[0].values[1]},o={x:e[0].values[0],y:e[0].values[1]},c=!1;for(let a=1,y=e.length;y&&a<y;a++){let y=e[a],u=e[a+1]?e[a+1]:"",{type:r,values:p}=y,f=p.slice(-2),g={x:f[0],y:f[1]},v=[x,g];"C"!==r&&"Q"!==r||v.push({x:p[0],y:p[1]}),"C"===r&&v.push({x:p[2],y:p[3]});let M=v.map((e=>e.x)),m=v.map((e=>e.y)),d=(Math.max(...M)-Math.min(...M)+(Math.max(...m)-Math.min(...m)))/2||0;if("z"!==r.toLowerCase()){if(g.x===x.x&&g.y===x.y||"L"===r&&d<i){n&&s.push(`removed zero length ${r}`);continue}if("L"===r){if(l&&g.x===o.x&&g.y===o.y&&"z"===u.type.toLowerCase()){n&&s.push("unnessecary closing linto");continue}if("L"===u.type){let e=u.values.slice(-2);if(O([x,g,{x:e[0],y:e[1]}],i).flat){n&&s.push("remove flat linetos");continue}}}if("C"===r){let e=O([x,{x:p[0],y:p[1]},{x:p[2],y:p[3]},g],i),l=e.flat,a=e.ratio,h=u?u.values.slice(-2):"",r=h.length?{x:h[0],y:h[1]}:"";if(l){let e,t=!1;"C"===u.type&&(e=O([x,g,r],i),t=e.flat,t&&n&&s.push(`skip cubic - actually a lineto:  area-ratio: ${a}, flatness next:${e}`)),a<.1&&s.push("simplify cubic to lineto")}else t&&(c=J(x,p),y=c.pathData),t&&c.count&&s.push(`added extremes: ${c.count}`)}}y.length?h.push(...y):h.push(y),"z"===r.toLowerCase()?x=o:"M"===r&&(o={x:f[0],y:f[1]}),x={x:f[0],y:f[1]}}return h=function(e,t=!1,l=!1){let a=Z(e),n=[],s=a.length;for(let e=0;e<s;e++){let s=a[e],h=s.findIndex((e=>"L"===e.type)),y=s.findIndex((e=>"C"===e.type||"Q"===e.type)),u=new Set([...s.map((e=>e.type))]),r=u.has("L"),i=u.has("C")||u.has("Q"),x=s.length,o="z"===s[x-1].type.toLowerCase();if(o){if(o){let e=-1,a=0;if(l){let e=[];for(let t=0,l=s.length;t<l;t++){let l=s[t],{type:a,values:n}=l;if(n.length){let l=n.slice(-2),a={x:l[0],y:l[1],index:t};e.push(a)}}e=e.sort(((e,t)=>{e.y,t.y})),a=e[0].index}else{let t=G(z(s)),{left:l,right:n,top:u,bottom:x,width:o,height:c}=t,p=1/0,f=1/0;if(i)for(let t=0,a=s.length;t<a;t++){let a=s[t],{type:h,values:y}=a;if("C"===h||"Q"===h){let a=y.slice(-2),s={x:a[0],y:a[1]};s.x!==l&&s.y!==u&&s.x!==n&&s.y!==x||s.x<p&&s.y<f&&(e=t,p=s.x,f=s.y)}}y=e>-1?e:y,a=r?h:y}s=B(s,a),x=s.length;let u={x:s[0].values[0],y:s[0].values[1]},o=s[x-2],c=o.type,p=o.values.slice(-2),f="L"===c&&p[0]===u.x&&p[1]===u.y;t&&f&&s.splice(x-2,1),n.push(...s)}}else n.push(...s)}return n}(h,l,a),s.push(`original command count: ${e.length}; removed:${e.length-h.length} `),n&&console.log(s),h}function K(e,t=9){let l=0,a=[],n=Z(e),s=n.length>1,h=[];if(s){let e=H(n);e.forEach((function(t,l){for(let l=0;l<e.length;l++){let a=e[l];if(t!=a){R(t,a)&&h.push(l)}}}))}return n.forEach(((e,t)=>{a=[];let n=0,s=0,y=1,u=[];e.forEach((function(t,l){let[s,h]=[t.type,t.values],y=h.length;if(h.length){let r=(l>0?e[l-1]:e[0]).values,i=r.length,x={x:r[i-2],y:r[i-1]},o={x:h[y-2],y:h[y-1]};if("C"===s||"Q"===s){let e={x:h[0],y:h[1]};u="C"===s?[x,e,{x:h[2],y:h[3]},o]:[x,e,o];let t=Math.abs(function(e){let t,[l,a,n,s]=[e[0],e[1],e[2],e[e.length-1]];if(e.length<3)return 0;3===e.length&&(a={x:1*e[0].x/3+2*e[1].x/3,y:1*e[0].y/3+2*e[1].y/3},n={x:1*e[2].x/3+2*e[1].x/3,y:1*e[2].y/3+2*e[1].y/3});return t=3*(l.x*(-2*a.y-n.y+3*s.y)+a.x*(2*l.y-n.y-s.y)+n.x*(l.y+a.y-2*s.y)+s.x*(-3*l.y+a.y+2*n.y))/20,t}(u));n+=t,a.push(x,o)}else if("A"===s){let e=T(x.x,x.y,t.values[0],t.values[1],t.values[2],t.values[3],t.values[4],o.x,o.y),{cx:l,cy:s,rx:h,ry:y,startAngle:u,endAngle:r,deltaAngle:i}=e,c=Math.abs(function(e,t,l,a){const n=Math.PI*e*t;let s=(a-l+2*Math.PI)%(2*Math.PI);if(e===t)return n*(s/(2*Math.PI));const h=l=>Math.atan2(e*Math.sin(l),t*Math.cos(l));return l=h(l),a=h(a),s=(a-l+2*Math.PI)%(2*Math.PI),n*(s/(2*Math.PI))}(h,y,u,r));c-=Math.abs(Y([x,{x:l,y:s},o])),a.push(x,o),n+=c}else a.push(x,o)}}));let r=Y(a);-1!==h.indexOf(t)&&(y=-1),s=r<0&&n<0?(Math.abs(n)-Math.abs(r))*y:(Math.abs(n)+Math.abs(r))*y,l+=s})),l}function W(e=[],t=0,l=0,a=.75){let n=4===e.length?"C":"Q",s=e.shift(),h=e[0],y=e[e.length-1],u="C"===n?e[1]:h,r={accurate:!1,areaDiff:1/0,comArea:null,cpArea:null,signChange:null},i=I(s,y,h,u,!0),x=I(s,h,y,u,!0);if(i||x)return r;if(r.cpArea=Y([s,...e]),r.signChange=r.cpArea<0&&l>0||r.cpArea>0&&l<0,r.signChange)return r;let o=[{type:"M",values:[s.x,s.y]},{type:n,values:[...e.map((e=>[e.x,e.y])).flat()]}];return r.comArea=K(o),r.areaDiff=X(t,r.comArea),r.accurate=r.areaDiff<.3*a,r}function X(e,t){let l=Math.abs(e-t);return Math.abs(100-100/e*(e+l))}function Y(e,t=.001){let l=0;for(let t=0,a=e.length;a&&t<a;t++){l+=e[t].x*e[t===e.length-1?0:t+1].y*.5-e[t===e.length-1?0:t+1].x*e[t].y*.5}return l}function _(e,t=7.5){let l=[],a=Z(e);for(let e=0,n=a.length;e<n;e++){let n,s,h,y=a[e],u=[],r={x:y[0].values[0],y:y[0].values[1]},i=r;for(let e=0,l=y.length;e<l;e++){let l=y[e],{type:a,values:x}=l,o=x.slice(-2);if(h={x:o[0],y:o[1]},"M"===a&&(r={x:x[0],y:x[1]},i=r),"z"===a.toLowerCase()&&(i=r),"C"===a){n={x:x[0],y:x[1]},s={x:x[2],y:x[3]},i.x,i.y,n.x,n.y,s.x,s.y,h.x,h.y;let e=ee(i,n,s,h,t),{isArc:a,area:y}=e;a&&(l=e.com),u.push(l),i=h}else i=h,u.push(l)}l.push(...u)}return l}function ee(e,t,l,a,n=7.5){let s={type:"C",values:[t.x,t.y,l.x,l.y,a.x,a.y]},h=0,y=!1,u=L(e,t,!0),r=L(a,l,!0),i=180*Math.abs(u-r)/Math.PI;if(Math.abs(i%180-90)<3){let u=I(e,t,a,l,!1);if(u){let r=k(e,u),i=k(a,u),x=+Math.max(r,i).toFixed(8),o=+Math.min(r,i).toFixed(8),c=o,p=x,f=Y([e,t,l,a])<0?0:1,g=Math.abs(a.x-e.x)>Math.abs(a.y-e.y);100/c*Math.abs(c-p)<5&&(c=x,p=c),g&&(c=x,p=o);let v=K([{type:"M",values:[e.x,e.y]},{type:"C",values:[t.x,t.y,l.x,l.y,a.x,a.y]}]),M={type:"A",values:[c,p,0,0,f,a.x,a.y]};h=Math.PI*(c*p)/4,h-=Math.abs(Y([e,a,u])),X(v,h)<n&&(y=!0,s=M)}}return{com:s,isArc:y,area:h}}function te(e,t){Array.isArray(e)&&(e={x:e[0],y:e[1]});let l={x:e.x+2/3*(t[0]-e.x),y:e.y+2/3*(t[1]-e.y)},a={x:t[2]+2/3*(t[0]-t[2]),y:t[3]+2/3*(t[1]-t[3])};return{type:"C",values:[l.x,l.y,a.x,a.y,t[2],t[3]]}}function le(e,t=!1,l=-1){l>=0&&(e[0].values=e[0].values.map((e=>+e.toFixed(l))));let a=e[0].values,n=a[0],s=a[1],h=n,y=s;for(let a=1,u=e.length;a<u;a++){let u=e[a],{type:r,values:i}=u,x=t?r.toLowerCase():r.toUpperCase();if(r!==x)switch(r=x,u.type=r,r){case"a":case"A":i[5]=t?i[5]-n:i[5]+n,i[6]=t?i[6]-s:i[6]+s;break;case"v":case"V":i[0]=t?i[0]-s:i[0]+s;break;case"h":case"H":i[0]=t?i[0]-n:i[0]+n;break;case"m":case"M":t?(i[0]-=n,i[1]-=s):(i[0]+=n,i[1]+=s),h=t?i[0]+n:i[0],y=t?i[1]+s:i[1];break;default:if(i.length)for(let e=0;e<i.length;e++)i[e]=t?i[e]-(e%2?s:n):i[e]+(e%2?s:n)}let o=i.length;switch(r){case"z":case"Z":n=h,s=y;break;case"h":case"H":n=t?n+i[0]:i[0];break;case"v":case"V":s=t?s+i[0]:i[0];break;case"m":case"M":h=i[o-2]+(t?n:0),y=i[o-1]+(t?s:0);default:n=i[o-2]+(t?n:0),s=i[o-1]+(t?s:0)}l>=0&&(u.values=u.values.map((e=>+e.toFixed(l))))}return e}function ae(e,t=-1){return le(e,!1,t)}function ne(e,t=-1,l=!0){let a;if(l){let t=e.map((e=>e.type)).join(""),l=/[hstv]/gi.test(t);if(a=/[astvqmhlc]/g.test(t),!l)return e}let n=[],s={type:"M",values:(e=l&&a?ae(e,t):e)[0].values};n.push(s);for(let l=1,a=e.length;l<a;l++){let a,h,y,u,r,i,x,o,c=e[l],{type:p,values:f}=c,g=f.length,v=s.values,M=v.length,[m,d]=[f[g-2],f[g-1]],[b,C]=[v[M-2],v[M-1]];switch(p){case"H":s={type:"L",values:[f[0],C]};break;case"V":s={type:"L",values:[b,f[0]]};break;case"T":[a,h]=[v[0],v[1]],[b,C]=[v[M-2],v[M-1]],y=b+(b-a),u=C+(C-h),s={type:"Q",values:[y,u,m,d]};break;case"S":[a,h]=[v[0],v[1]],[b,C]=[v[M-2],v[M-1]],[x,o]=M>2&&"A"!==s.type?[v[2],v[3]]:[b,C],y=2*b-x,u=2*C-o,r=f[0],i=f[1],s={type:"C",values:[y,u,r,i,m,d]};break;default:s={type:p,values:f}}t>-1&&(s.values=s.values.map((e=>+e.toFixed(t)))),n.push(s)}return n}function se(e,l,a,n,s,h,y,u,r){const i=(e,t,l,a,n,s,h,y,u)=>{let r=1-u,i=e*r+l*u,x=l*r+n*u,o=n*r+h*u,c=i*r+x*u,p=x*r+o*u,f=c*r+p*u,g=t*r+a*u,v=a*r+s*u,M=s*r+y*u,m=g*r+v*u,d=v*r+M*u,b=m*r+d*u;return[[e,t,i,g,c,m,f,b],[f,b,p,d,o,M,h,y]]};let o,c=((e,t,l,a,n,s,h,y)=>((e,t,l)=>{if(0===e)return 0===t?[]:[-l/t];let a=t*t-4*e*l;if(Math.abs(a)<1e-16)return[-t/(2*e)];if(a<0)return[];let n=Math.sqrt(a);return[(-t-n)/(2*e),(-t+n)/(2*e)]})(-h*(t-2*a+s)+n*(2*t-3*a+y)+e*(a-2*s+y)-l*(t-3*s+2*y),h*(t-a)+3*n*(-t+a)+l*(2*t-3*s+y)-e*(2*a-3*s+y),n*(t-a)+e*(a-s)+l*(-t+s)).filter((function(e){return e>1e-8&&e<1-1e-8})).sort(((e,t)=>e-t)))(e,l,a,n,s,h,y,u);if(c.length){for(var p,f,g=[],v=[e,l,a,n,s,h,y,u],M=0,d=0;d<c.length;d++)f=i(v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],1-(1-c[d])/(1-M)),p=A(f[0][0],f[0][1],f[0][2],f[0][3],f[0][4],f[0][5],f[0][6],f[0][7],r),g=g.concat(p.slice(0,-2)),v=f[1],M=c[d];p=A(v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],r),o=g.concat(p)}else o=A(e,l,a,n,s,h,y,u,r);let C=[];for(let e=2;e<o.length;e+=4)C.push({type:"Q",values:[o[e],o[e+1],o[e+2],o[e+3]]});return C;function A(e,l,a,n,s,h,y,u,r=.1){const i=(e,t,l,a,n,s)=>{for(let h=1/n.length,y=0;y<n.length;y++)if(!S(e,t,l,a,y*h,(y+1)*h,n[y][0],n[y][1],n[y][2],s))return!1;return!0},o=(e,t,l,a,n)=>({x:((e.x*n+t.x)*n+l.x)*n+a.x,y:((e.y*n+t.y)*n+l.y)*n+a.y}),C=(e,t,l,a)=>({x:(e.x*a+t.x)*a+l.x,y:(e.y*a+t.y)*a+l.y}),A=(e,t,l,a,n)=>({x:(3*e.x*n+2*t.x)*n+l.x,y:(3*e.y*n+2*t.y)*n+l.y}),w=(e,t,l,a,n,s)=>{var h=o(e,t,l,a,n),y=o(e,t,l,a,s),u=A(e,t,l,0,n),r=A(e,t,l,0,s),i=-u.x*r.y+r.x*u.y;return Math.abs(i)<1e-8?[h,{x:(h.x+y.x)/2,y:(h.y+y.y)/2},y]:[h,{x:(u.x*(y.y*r.x-y.x*r.y)+r.x*(h.x*u.y-h.y*u.x))/i,y:(u.y*(y.y*r.x-y.x*r.y)+r.y*(h.x*u.y-h.y*u.x))/i},y]},S=(e,l,a,n,s,h,y,u,r,i)=>{const x=(e,t,l)=>{let a=l.x-t.x,n=l.y-t.y,s=(e.x-t.x)*a+(e.y-t.y)*n,h=a*a+n*n,y=0;return 0!=h&&(y=s/h),y=y<=0?Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2):y>=1?Math.pow(e.x-l.x,2)+Math.pow(e.y-l.y,2):Math.pow(e.x-(t.x+a*y),2)+Math.pow(e.y-(t.y+n*y),2),y};let c,p,f,g,v,M=((e,t,l)=>[{x:-2*t.x+e.x+l.x,y:-2*t.y+e.y+l.y},{x:2*(t.x-e.x),y:2*(t.y-e.y)},e])(y,u,r),m=M[0],d=M[1],b=M[2],A=i*i,w=[],P=[];for(c=(h-s)/10,p=0,t=s;p<=10;p++,t+=c)w.push(o(e,l,a,n,t));for(c=.1,p=0,t=0;p<=10;p++,t+=c)P.push(C(m,d,b,t));for(p=1;p<w.length-1;p++){for(v=1/0,f=0;f<P.length-1;f++)g=x(w[p],P[f],P[f+1]),v=Math.min(v,g);if(v>A)return!1}for(p=1;p<P.length-1;p++){for(v=1/0,f=0;f<w.length-1;f++)g=x(P[p],w[f],w[f+1]),v=Math.min(v,g);if(v>A)return!1}return!0};for(M=((e,t,l,a)=>[{x:a.x-e.x+3*(t.x-l.x),y:a.y-e.y+3*(t.y-l.y)},{x:3*(e.x+l.x)-6*t.x,y:3*(e.y+l.y)-6*t.y},{x:3*(t.x-e.x),y:3*(t.y-e.y)},e])(p={x:e,y:l},f={x:a,y:n},g={x:s,y:h},v={x:y,y:u}),d=M[0],P=M[1],m=M[2],x=M[3],b=1;b<=8;b++){c=[];for(let e=0;e<1;e+=1/b)c.push(w(d,P,m,x,e,e+1/b));let e=(c[0][1].x-p.x)*(f.x-p.x)+(c[0][1].y-p.y)*(f.y-p.y),t=(c[0][1].x-v.x)*(g.x-v.x)+(c[0][1].y-v.y)*(g.y-v.y);if((1!==b||!(e<0||t<0))&&i(d,P,m,x,c,r))break}let L=[c[0][0].x,c[0][0].y];for(let e=0;e<c.length;e++)L.push(c[e][1].x,c[e][1].y,c[e][2].x,c[e][2].y);return L}}function he(e,t,l=1){const a=2*Math.PI;let[n,s,h,y,u,r,i]=t;if(0===n||0===s)return[];let x=h?h*a/360:0,o=x?Math.sin(x):0,c=x?Math.cos(x):1,p=c*(e.x-r)/2+o*(e.y-i)/2,f=-o*(e.x-r)/2+c*(e.y-i)/2;if(0===p&&0===f)return[];n=Math.abs(n),s=Math.abs(s);let g=p*p/(n*n)+f*f/(s*s);if(g>1){let e=Math.sqrt(g);n*=e,s*=e}let v=n*n,M=n===s?v:s*s,m=p*p,d=f*f,b=v*M-v*d-M*m;b<=0?b=0:(b/=v*d+M*m,b=Math.sqrt(b)*(y===u?-1:1));let C=b?b*n/s*f:0,A=b?b*-s/n*p:0,w=c*C-o*A+(e.x+r)/2,P=o*C+c*A+(e.y+i)/2,S=(p-C)/n,L=(f-A)/s,I=(-p-C)/n,k=(-f-A)/s;const D=(e,t,l,a)=>{let n=+(e*l+t*a).toFixed(9);return 1===n||-1===n?1===n?0:Math.PI:(n=n>1?1:n<-1?-1:n,(e*a-t*l<0?-1:1)*Math.acos(n))};let Q=D(1,0,S,L),$=D(S,L,I,k);0===u&&$>0?$-=2*Math.PI:1===u&&$<0&&($+=2*Math.PI);let z=(+(Math.abs($)/(a/4)).toFixed(0)||1)*l;$/=z;let T=[];const E=1.5707963267948966,F=.551785;let V=$===E?F:$===-E?-F:4/3*Math.tan($/4),q=$?Math.cos($):1,O=$?Math.sin($):0;const j=(e,t,l,a,n)=>{let s=e!=t?Math.cos(e):a,h=e!=t?Math.sin(e):n,y=Math.cos(e+t),u=Math.sin(e+t);return[{x:s-h*l,y:h+s*l},{x:y+u*l,y:u-y*l},{x:y,y:u}]};for(let e=0;e<z;e++){let e={type:"C",values:[]};j(Q,$,V,q,O).forEach((t=>{let l=t.x*n,a=t.y*s;e.values.push(c*l-o*a+w,o*l+c*a+P)})),T.push(e),Q+=$}return T}function ye(e,t=7.5,l=!0,a=!1){const n=1.333;let s,h,y,u,r,i,x,o,c,p,f,g,v,M,m,d,b,C,A,w,P=[],S=e.length,{type:L,p0:D,cp1:Q,cp2:z=null,p:T,values:E}=e[0],F=[{type:"M",values:[D.x,D.y]},...e],V=K(F),q=e.length-1,j=e.length>2?Math.ceil(e.length/2)-1:1,Z=!1,N=1e4,J=1e4,G=1e4;if(!a&&1===S&&"C"===L){let l=O([D,Q,z,T]);if(w=l.area,l.flat)return console.log("is flat cubic!"),console.log(l,"thresh"),P=[{type:"L",values:[T.x,T.y]}],P;let a=I(D,Q,T,z,!1);return P=[e[0]],a&&(f=W([D,a,T],V,w,t).areaDiff,f<t&&(P=[{type:"Q",values:[a.x,a.y,T.x,T.y]}])),P}if(S>1&&("Q"===L&&(e.forEach(((t,l)=>{let a=te(t.p0,t.values),n={x:a.values[0],y:a.values[1]},s={x:a.values[2],y:a.values[3]};e[l].type="C",e[l].cp1=n,e[l].cp2=s,e[l].values=[n.x,n.y,s.x,s.y,t.p.x,t.p.y]})),L="C"),s=e[1].p0,h=e[1].cp1,y="C"===L?e[1].cp2:null,u=e[1].p,x=e[q].p,r=e[q].cp1,i="C"===L?e[q].cp2:e[q].cp1,w=Y([D,Q,y,x]),!a)){O(e.map((e=>[e.p0,e.cp1,e.cp2,e.p])).flat())}if(S>2){let{com:l,isArc:a,area:r}=ee(D,Q,i,x);if(o=X(V,r),a&&o<.75*t)return P=[l],P;let C=e[j].p,A="C"===L?e[j].cp2:e[j].cp1,S=I(C,A,D,Q,!1);if(S){c=S,p=I(C,A,x,i,!1),M=$([D,c],n),m=$([x,p],n),f=W([D,M,m,x],V,w,t),Z=f.accurate,N=f.areaDiff,o=N}if(!Z){v=$("C"===L?[s,h,y,u]:[s,h,u],.5,!0,!0);let e="C"===L?v.cpts[2]:v.cpts[0];d=I(v,e,Q,D,!1),b=I(v,e,i,x,!1),d=$([D,d],n),b=$([x,b],n),g=W([D,d,b,x],V,w,t),Z=g.accurate,J=g.areaDiff}c=N<J?M:d,p=N<J?m:b,o=N<J?N:J}else if(2===S){let l,a,s;if(y=e[0].cp2,i=e[1].cp2,l=I(D,Q,i,x,!1),l&&(a=I(T,y,D,l,!1),s=I(T,r,x,l,!1),M=$([D,a],n),m=$([x,s],n),f=W([D,M,m,x],V,w,t),Z=f.accurate,N=f.areaDiff),!Z){let e=k(D,h),l=k(u,i),a=e+l,n=a/l;d=$([D,h],a/e),b=$([u,i],n),g=W([D,d,b,x],V,w,t),Z=g.accurate,J=g.areaDiff}if(!Z){Q=e[0].cp1,z=e[0].cp2,T=e[0].p,v=$([D,Q,z,T],.5,!0,!0);let l="C"===L?v.cpts[2]:v.cpts[0];C=I(v,l,Q,D,!1),A=I(v,l,i,x,!1),C=$([D,C],n),A=$([x,A],n),g=W([D,C,A,x],V,w,t),Z=g.accurate,G=g.areaDiff,G<t&&G<J&&(d=C,b=A,J=G)}c=N<J?M:d,p=N<J?m:b,o=N<J?N:J}return c&&p?(o<t?P.push({type:"C",values:[c.x,c.y,p.x,p.y,x.x,x.y]}):P=e,P.length,P):[...e]}function ue(e,t=.1){let l=e[0].values.slice(-2).map((e=>+e.toFixed(8))),a=e[0].p0,n=a,s=[];for(let t=1,h=e.length;t<h;t++){let h=e[t-1];if(l=h.values.slice(-2).map((e=>+e.toFixed(8))),n={x:l[0],y:l[1]},n.x===a.x&&n.y===a.y){console.log("zero length",h),a=n;continue}let y=e[t].values.slice(-2),u={x:y[0],y:y[1]};if(O([a,n,u]).flat){let e=L(a,n,!0),t=L(n,u,!0);if(Math.abs(e-t)<Math.PI/4)continue}a=n,s.push(h)}return s.push(e[e.length-1]),s}function re(e,t,l){return e.forEach(((e,a)=>{let{type:n,values:s}=e;switch(n.toLowerCase()){case"a":e.values=[s[0]*t,s[1]*l,s[2],s[3],s[4],s[5]*t,s[6]*l];break;case"h":e.values=[s[0]*t];break;case"v":e.values=[s[0]*l];break;default:if(s.length)for(let a=0;a<s.length;a+=2)e.values[a]*=t,e.values[a+1]*=l}})),e}function ie(e,t=3,l=!0,a=!1,n=!0,s=!1,h=!1){K(e);let y=function(e){let t=1/0,l=-1/0,a=1/0,n=-1/0;const s=e=>{e.x<t&&(t=e.x),e.x>l&&(l=e.x),e.y<a&&(a=e.y),e.y>n&&(n=e.y)};for(let t=0;t<e.length;t++){let l=e[t],{type:a,values:n}=l,h=n.length,y=(e[t-1]?e[t-1]:e[t]).values,u=y.length;if(h){let e={x:y[u-2],y:y[u-1]},t={x:n[h-2],y:n[h-1]};if(s(t),"C"===a||"Q"===a){let l={x:n[0],y:n[1]},h="C"===a?{x:n[2],y:n[3]}:l,y="C"===a?[e,l,h,t]:[e,l,t];V(y).forEach((e=>{let t=$(y,e);s(t)}))}else"A"===a&&q(e,n).forEach((e=>{s(e)}))}}return{x:t,y:a,width:l-t,height:n-a}}(e),u=(y.width+y.height)/2,r=u<10?100/u:1;1!=r&&(e=re(e,r,r));let i=!0;i=!1;let x=!1,o=!0,c=function(e=[]){let t=Z(e=JSON.parse(JSON.stringify(e))),l=[],a=[];return t.forEach((e=>{let t,n=K(e),s=G(z(e)),{left:h,right:y,top:u,bottom:r,width:i,height:x}=s,o=e[0].values[0],c=e[0].values[1],p={x:e[0].values[0],y:e[0].values[1]},f={x:e[0].values[0],y:e[0].values[1]};e[0].p0=p,e[0].p=p,e[0].lineto=!1,e[0].corner=!1,e[0].extreme=!1,e[0].directionChange=!1,e[0].closePath=!1;let g=[e[0]],v=0,M=e.length;for(let l=2;M&&l<=M;l++){let a=e[l-1],{type:n,values:s}=a,M=s.slice(-2),m=[f],d=!1;a.lineto=!1,a.corner=!1,a.extreme=!1,a.directionChange=!1,a.closePath=!1;let b,C,A,w,P,S,I,k=.05;t=M.length?{x:M[0],y:M[1]}:p,"M"===n?(p=t,f=t):"z"===n.toLowerCase()&&(t=p),a.p0=f,a.p=t,"L"===n&&(a.lineto=!0),"Z"===n&&(a.closePath=!0,p.x!==o&&p.y!==c&&(a.lineto=!0)),"Q"!==n&&"C"!==n||(b={x:s[0],y:s[1]},C="C"===n?{x:s[2],y:s[3]}:null,a.cp1=b,C&&(a.cp2=C)),s.length>2&&("Q"!==n&&"C"!==n||m.push(b),"C"===n&&m.push(C),m.push(t),d=O(m).flat,a.flat=d,d&&(a.extreme=!1)),d||"L"===n||t.x!==h&&t.y!==u&&t.x!==y&&t.y!==r||(a.extreme=!0);let Q=(i+x)/2;a.dimA=Q;let $=e[l]?e[l]:null,z=$?$.values.slice(-2):null;S=$?$.type:null,$&&(P=$?{x:z[0],y:z[1]}:null,"Q"!==$.type&&"C"!==$.type||(A={x:$.values[0],y:$.values[1]},w="C"===$.type?{x:$.values[2],y:$.values[3]}:null)),I=Y(m);let T=v<0&&I>0||v>0&&I<0;if(v=I,T&&(a.directionChange=!0),("Q"===n||"C"===n)&&("Q"===n&&"Q"===S||"C"===n&&"C"===S)){let e=m.slice(1),l=O("C"===n?[t,A,w,P]:[t,A,P],(Math.abs(P.x-f.x)+Math.abs(P.y-f.y))/2*.1).flat;if(d&&l||!a.extreme&&!F(0,e,k)){let e=C?[C,t]:[b,t],l=[t,A],n=L(...e,!0),s=L(...l,!0),h=180*Math.abs(n-s)/Math.PI,y=D(...e),u=D(...l);h>10&&y&&u&&(a.corner=!0)}else a.extreme=!0}g.push(a),f=t}let m=(i+x)/2;l.push({pathData:g,bb:s,area:n,dimA:m}),a.length&&console.log(a)})),l}(e=U(e,i,x,o,h)),p=function(e=[],t=!1){for(let l=0,a=e.length;l<a;l++){let a=e[l].pathData;e[l].chunks=[[a[0]],[]];let n=[[a[0]],[]],s=1,h=!1,y=!1,u=!1,r="M",i=!1;for(let e=1,t=a.length;e<t;e++){let t=a[e],{extreme:l,corner:x,directionChange:o}=t;i=r!==t.type,(o||h||y||u||i)&&n[s].length&&(n.push([]),s++),h=l,y=x,u="z"===t.type.toLowerCase(),r=t.type,n[s].push(t)}t&&n.forEach(((e,t)=>{let l=t%2==0?"green":"orange";t===n.length-2&&(l="magenta");let a=e[0].p0;if(a){let t=`M ${a.x} ${a.y}`;e.forEach((e=>{t+=`${e.type} ${e.values.join(" ")}`})),j(svg1,t,l,"0.5%","0.5")}})),e[l].chunks=n}return e}(c,h),f=[];for(let e=0,n=p.length;n&&e<n;e++){let n,s=p[e],{chunks:h,dimA:y,area:u}=s,r=h.length;for(let e=0;e<r;e++){let s=h[e],y=s[0].type;if(a||1!==s.length||"C"!==y)if(s.length<2)f.push(...s);else if("L"===y&&s.length>1)n=ue(s),f.push(...n);else if(s.length>1&&("C"===y||"Q"===y)){if(s.length)if(s[0].directionChange,l&&s.length>4){let e=Math.ceil((s.length-1)/2),n=s.slice(0,e),h=s.slice(e),y=ye(n,t,l,a),u=ye(h,t,l,a);f.push(...y,...u)}else n=ye(s,t,l,a),f.push(...n)}else f.push(...s);else n=ye(s),f.push(...n)}}return n&&(f=_(f,.5*t),f=function(e){let t,l=[[]],a=0,n=[[]],s={x:e[0].values[0],y:e[0].values[1]};for(let h=0,y=e.length;h<y;h++){let y=e[h],{type:u,values:r}=y;if("A"===u){let u=e[h-1].values.slice(-2);s={x:u[0],y:u[1]};let[i,x,o,c,p,f,g]=r,v=100/i*Math.abs(i-x)<5;t={x:r[5],y:r[6]},y.p0=s,y.p=t,y.circular=v;let M=e[h+1];if(!l[a].length&&M&&"A"===M.type&&(l[a].push(y),n[a].push(h)),M&&"A"===M.type){let[e,y,u,r,o,c,p]=M.values,f=i!=e?100/i*Math.abs(i-e):0,g=x!=y?100/x*Math.abs(x-y):0;t={x:M.values[5],y:M.values[6]},M.p0=s,M.p=t,f<5&&g<5?(l[a].push(M),n[a].push(h+1)):(l.push([]),n.push([]),a++)}else l.push([]),n.push([]),a++}}if(!n.length)return e;l=l.filter((e=>e.length)),n=n.filter((e=>e.length));for(let t=l.length-1;t>=0;t--){const a=l[t],s=n[t][0],h=a.length;let y=0,u=0;a.forEach((({values:e})=>{const[t,l]=e;y+=t,u+=l})),y/=h,u/=h;let r=100/y*Math.abs(y-u)<5;r&&(y=(y+u)/2,u=y);let i=e[s-1].values.slice(-2);if(i[0],i[1],4===h){let[t,l,n,i,x,o,c]=a[1].values,[,,,,,p,f]=a[3].values;r&&(y=1,u=1);let g={type:"A",values:[y,u,n,i,x,o,c]},v={type:"A",values:[y,u,n,i,x,p,f]};e.splice(s,h,g,v)}else if(3===h){let[t,l,n,r,i,x,o]=a[0].values,[c,p,,,,f,g]=a[2].values;r=1;let v={type:"A",values:[y,u,n,r,i,f,g]};e.splice(s,h,v)}else if(2===h){let[t,l,n,i,x,o,c]=a[0].values,[p,f,,,,g,v]=a[1].values;r&&(y=1,u=1,n=0);let{p0:M,p:m}=a[0],[d,b]=[a[1].p0,a[1].p];if(M.x!==b.x||M.y!==b.y){let t={type:"A",values:[y,u,n,i,x,g,v]};e.splice(s,h,t)}}}return e}(f),console.log("arcs",f)),1!=r&&(f=re(f,1/r,1/r)),x=!0,o=!1,i=!1,f=U(f,i,x,o,h=!1),console.log("pathDataSimple post",f),f}function xe(e,{normalize:t=null,optimize:l=1,toAbsolute:n=!0,toRelative:s=!1,quadraticToCubic:h=!1,lineToCubic:y=!1,toLonghands:u=!0,toShorthands:r=!1,arcToCubic:i=!1,arcParam:x=!1,arcAccuracy:o=1,optimizeOrder:c=!1,reorderSub:p=!1,simplify:f=!1,tolerance:g=7.5,keepDetails:v=!0,forceCubic:M=!1,cubicToArc:m=!0,multipass:d=!1,cubicToQuadratic:b=!1,cubicToQuadraticPrecision:C=.1,decimals:A=-1,cubicToArcs:w=!1}={}){return!0===t&&(n=!0,u=!0,i=!0,h=!0,r=!1),e=JSON.parse(JSON.stringify(e)),n&&(e=ae(e)),u&&(e=ne(e,-1,!1)),f&&(K(e),e=ie(e,g,v,M,m,d)),e=function(e){let t={x:e[0].values[0],y:e[0].values[1]},l={...t};e[0].decimals=0;let a=0,n=0;for(let s=1,h=e.length;s<h;s++){let h=e[s],{type:y,values:u}=h,r=u.length?u.slice(-2):[t.x,t.y],i=r[0],x=r[1];"Z"!==y&&"z"!==y||(i=t.x,x=t.y);let o=(Math.abs(l.x-i)+Math.abs(l.y-x))/2||0,c="Z"!==y&&"z"!==y?Math.ceil(1/o).toString().length+1:0;0===o?c=a:c&&o<.5&&c++,l={x:i,y:x},"M"===y?(t={x:u[0],y:u[1]},h.decimals=c):h.decimals=c,n=c>n?c:n,a=c}return e[0].decimals=n,e}(e),w&&!i&&(e=pathDataCubicToArc(e)),h&&(e=function(e){let t=[e[0]];for(let l=1,a=e.length;l<a;l++){let a=e[l],n=e[l-1].values,s=n.length,h={x:n[s-2],y:n[s-1]};"Q"===a.type?t.push(te(h,a.values)):t.push(a)}return t}(e)),b&&(e=function(e,t=.1){let l=[(e=ne(e))[0]];for(let a=1,n=e.length;a<n;a++){let n=e[a-1],s=e[a],[h,y]=[s.type,s.values],[u,r]=[n.type,n.values],i=r.length,[x,o]=[r[i-2],r[i-1]];"C"==h?se(x,o,y[0],y[1],y[2],y[3],y[4],y[5],t).forEach((e=>{l.push(e)})):l.push(s)}return l}(e,C)),i&&(e=function(e,{arcAccuracy:t=1}={}){let l=[e[0]];for(let a=1,n=e.length;a<n;a++){let n=e[a],s=e[a-1].values,h=s.length,y={x:s[h-2],y:s[h-1]};"A"===n.type?he(y,n.values,t).forEach((e=>{l.push(e)})):l.push(n)}return l}(e)),-1!==A&&(e=a(e,A)),r&&(e=function(e,t=-1,l=!0){let a;if(l){let t=e.map((e=>e.type)).join("");a=/[astvqmhlc]/g.test(t)}let n={type:"M",values:(e=l&&a?ae(e,t):e)[0].values};e[0].decimals&&(n.decimals=e[0].decimals);let s,h=[n],y={x:e[0].values[0],y:e[0].values[1]};for(let l=1,a=e.length;l<a;l++){let a=e[l],{type:u,values:r}=a,i=r.slice(-2),x=e[l-1],o=x.type;s={x:i[0],y:i[1]};let c,p,f,g,v={x:r[0],y:r[1]},M=Math.abs(s.x-y.x),m=Math.abs(s.y-y.y),d=(M+m)/2*.01;switch(u){case"L":n=0===m||m<d&&M>d?{type:"H",values:[r[0]]}:0===M||m>d&&M<d?{type:"V",values:[r[1]]}:a;break;case"Q":if("Q"!==o){y={x:i[0],y:i[1]},h.push(a);continue}let e={x:x.values[0],y:x.values[1]};g={x:2*y.x-e.x,y:2*y.y-e.y},c=Math.abs(v.x-g.x),p=Math.abs(v.y-g.y),f=(c+p)/2,n=f<d?{type:"T",values:[s.x,s.y]}:a;break;case"C":let t={x:r[2],y:r[3]};if("C"!==o){h.push(a),y={x:i[0],y:i[1]};continue}let l={x:x.values[2],y:x.values[3]};g={x:2*y.x-l.x,y:2*y.y-l.y},c=Math.abs(v.x-g.x),p=Math.abs(v.y-g.y),f=(c+p)/2,n=f<d?{type:"S",values:[t.x,t.y,s.x,s.y]}:a;break;default:n={type:u,values:r}}(a.decimals||0===a.decimals)&&(n.decimals=a.decimals),t>-1&&(n.values=n.values.map((e=>+e.toFixed(t)))),y={x:i[0],y:i[1]},h.push(n)}return h}(e)),s&&(e=function(e,t=-1){return le(e,!0,t)}(e)),-1!==A&&(e=a(e,A)),e}function oe(e,t=1){let l=t>1,a=!l;"l"===e[1].type&&a&&(e[0].type="m");let n="";n=l?`${e[0].type} ${e[0].values.join(" ")}\n`:`${e[0].type}${e[0].values.join(" ")}`;for(let t=1,s=e.length;t<s;t++){let s=e[t-1],h=e[t],{type:y,values:u}=h;if(!a||"A"!==y&&"a"!==y||(u=[u[0],u[1],u[2],`${u[3]}${u[4]}${u[5]}`,u[6]]),y=s.type===h.type&&"m"!==h.type.toLowerCase()&&a||("m"===s.type&&"l"===h.type||"M"===s.type&&"l"===h.type||"M"===s.type&&"L"===h.type)&&a?" ":h.type,a){let e="",t=!1;for(let l=0,a=u.length;l<a;l++){let a=u[l],n=a.toString(),s=n.includes(".")&&Math.abs(a)<1;s&&t&&(n=n.replace(/^0\./,".")),!(l>0)||t&&s||(e+=" "),e+=n,t=s}n+=`${y}${e}`}else n+=l?`${y} ${u.join(" ")}\n`:`${y}${u.join(" ")}`}return a&&(n=n.replace(/ 0\./g," .").replace(/ -/g,"-").replace(/-0\./g,"-.").replace(/Z/g,"z")),n}function ce(e,{toAbsolute:t=!1,toRelative:a=!0,quadraticToCubic:n=!1,toLonghands:s=!1,toShorthands:h=!0,arcToCubic:y=!1,simplify:u=!0,tolerance:r=3,keepDetails:i=!0,forceCubic:x=!1,cubicToArc:o=!0,multipass:c=!1,cubicToQuadratic:p=!1,cubicToQuadraticPrecision:f=.1,decimals:g="auto",minify:v=1}={}){let M=l(e).pathData,m=xe(M,{toAbsolute:!0,toLonghands:!0,arcToCubic:!1}),d=JSON.parse(JSON.stringify(m));d=xe(M,{simplify:u,tolerance:r,keepDetails:i,forceCubic:x,cubicToArc:o,toShorthands:h,toRelative:a,decimals:g,minify:v,multipass:c});let b=oe(d);this.pathData=M,this.pathDataSimple=d,this.d=b}"undefined"!=typeof window&&(window.SVGiiSimplify=ce),SVGiiSimplify.prototype.toString=function(e=1){let t=this.pathDataSimple.length?this.pathDataSimple:this.pathData;return this.d=oe(t,e),this.d},SVGiiSimplify.prototype.getPathData=function(){return this.pathDataSimple.length?this.pathDataSimple:this.pathData},SVGiiSimplify.prototype.getPathDataNorm=function(){return this.pathData},e.SVGiiSimplify=ce}(this.SVGiiSimplify=this.SVGiiSimplify||{});
